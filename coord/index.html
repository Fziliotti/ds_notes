


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>Coordenação - Notas em Sistemas Distribuídos</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a676eddb.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-PJX835H7DP","lasarojc.github.org/dsnotes"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#coordenacao" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Notas em Sistemas Distribuídos" class="md-header-nav__button md-logo" aria-label="Notas em Sistemas Distribuídos">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Notas em Sistemas Distribuídos
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Coordenação
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Notas em Sistemas Distribuídos" class="md-nav__button md-logo" aria-label="Notas em Sistemas Distribuídos">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    Notas em Sistemas Distribuídos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Prólogo" class="md-nav__link">
      Prólogo
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intro/" title="Introdução" class="md-nav__link">
      Introdução
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../basics/" title="Fundamentos" class="md-nav__link">
      Fundamentos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../comm/" title="Comunicação" class="md-nav__link">
      Comunicação
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../arch/" title="Arquiteturas" class="md-nav__link">
      Arquiteturas
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Coordenação
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Coordenação" class="md-nav__link md-nav__link--active">
      Coordenação
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#exclusao-mutua" class="md-nav__link">
    Exclusão Mútua
  </a>
  
    <nav class="md-nav" aria-label="Exclusão Mútua">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua_1" class="md-nav__link">
    Exclusão Mútua
  </a>
  
    <nav class="md-nav" aria-label="Exclusão Mútua">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua_2" class="md-nav__link">
    Exclusão Mútua
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua-solucoes" class="md-nav__link">
    Exclusão Mútua - Soluções
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centralizado" class="md-nav__link">
    Centralizado
  </a>
  
    <nav class="md-nav" aria-label="Centralizado">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#centralizado_1" class="md-nav__link">
    Centralizado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros" class="md-nav__link">
    Prós
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contras" class="md-nav__link">
    Contras
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anel" class="md-nav__link">
    Anel
  </a>
  
    <nav class="md-nav" aria-label="Anel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anel_1" class="md-nav__link">
    Anel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros_1" class="md-nav__link">
    Prós
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contras_1" class="md-nav__link">
    Contras
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lidando-com-falhas-usando-timeouts" class="md-nav__link">
    Lidando com falhas usando timeouts
  </a>
  
    <nav class="md-nav" aria-label="Lidando com falhas usando timeouts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#impossibilidade-de-deteccao-de-falhas" class="md-nav__link">
    Impossibilidade de detecção de falhas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pergunta" class="md-nav__link">
    Pergunta:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resposta-mais-perguntas" class="md-nav__link">
    Resposta Mais perguntas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum" class="md-nav__link">
    Quórum
  </a>
  
    <nav class="md-nav" aria-label="Quórum">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quorum-coordenador" class="md-nav__link">
    Quorum - Coordenador
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-quorum" class="md-nav__link">
    Quorum - Quórum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-participante" class="md-nav__link">
    Quorum - Participante
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#falhas" class="md-nav__link">
    Falhas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-exemplo" class="md-nav__link">
    Quórum - Exemplo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calculo-de-p_vp_v" class="md-nav__link">
    Cálculo de P_vP_v
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemplo" class="md-nav__link">
    Exemplo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros_2" class="md-nav__link">
    Prós
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua_3" class="md-nav__link">
    Exclusão Mútua
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contras_2" class="md-nav__link">
    Contras
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eleicao-de-lideres" class="md-nav__link">
    Eleição de Líderes
  </a>
  
    <nav class="md-nav" aria-label="Eleição de Líderes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eleicao-de-lideres_1" class="md-nav__link">
    Eleição de Líderes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eleicao-de-representate-de-sala" class="md-nav__link">
    Eleição de representate de sala
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../time/" title="Tempo" class="md-nav__link">
      Tempo
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../fault/" title="Tolerância a Falhas" class="md-nav__link">
      Tolerância a Falhas
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../disdb/" title="Bancos de Dados" class="md-nav__link">
      Bancos de Dados
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../disfs/index.md" title="Sistemas de Arquivos" class="md-nav__link">
      Sistemas de Arquivos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tech/" title="Tecnologias" class="md-nav__link">
      Tecnologias
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#exclusao-mutua" class="md-nav__link">
    Exclusão Mútua
  </a>
  
    <nav class="md-nav" aria-label="Exclusão Mútua">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua_1" class="md-nav__link">
    Exclusão Mútua
  </a>
  
    <nav class="md-nav" aria-label="Exclusão Mútua">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua_2" class="md-nav__link">
    Exclusão Mútua
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua-solucoes" class="md-nav__link">
    Exclusão Mútua - Soluções
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centralizado" class="md-nav__link">
    Centralizado
  </a>
  
    <nav class="md-nav" aria-label="Centralizado">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#centralizado_1" class="md-nav__link">
    Centralizado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros" class="md-nav__link">
    Prós
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contras" class="md-nav__link">
    Contras
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anel" class="md-nav__link">
    Anel
  </a>
  
    <nav class="md-nav" aria-label="Anel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anel_1" class="md-nav__link">
    Anel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros_1" class="md-nav__link">
    Prós
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contras_1" class="md-nav__link">
    Contras
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lidando-com-falhas-usando-timeouts" class="md-nav__link">
    Lidando com falhas usando timeouts
  </a>
  
    <nav class="md-nav" aria-label="Lidando com falhas usando timeouts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#impossibilidade-de-deteccao-de-falhas" class="md-nav__link">
    Impossibilidade de detecção de falhas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pergunta" class="md-nav__link">
    Pergunta:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resposta-mais-perguntas" class="md-nav__link">
    Resposta Mais perguntas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum" class="md-nav__link">
    Quórum
  </a>
  
    <nav class="md-nav" aria-label="Quórum">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quorum-coordenador" class="md-nav__link">
    Quorum - Coordenador
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-quorum" class="md-nav__link">
    Quorum - Quórum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-participante" class="md-nav__link">
    Quorum - Participante
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#falhas" class="md-nav__link">
    Falhas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-exemplo" class="md-nav__link">
    Quórum - Exemplo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calculo-de-p_vp_v" class="md-nav__link">
    Cálculo de P_vP_v
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemplo" class="md-nav__link">
    Exemplo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pros_2" class="md-nav__link">
    Prós
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclusao-mutua_3" class="md-nav__link">
    Exclusão Mútua
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contras_2" class="md-nav__link">
    Contras
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eleicao-de-lideres" class="md-nav__link">
    Eleição de Líderes
  </a>
  
    <nav class="md-nav" aria-label="Eleição de Líderes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eleicao-de-lideres_1" class="md-nav__link">
    Eleição de Líderes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eleicao-de-representate-de-sala" class="md-nav__link">
    Eleição de representate de sala
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="coordenacao">Coordenação</h1>
<h2 id="exclusao-mutua">Exclusão Mútua</h2>
<p>Como visto em <a href="../concorrencia/concorrencia.md">Concorrência</a>, diversas tarefas exigem coordenação entre threads em uma aplicação centralizada em que se faz uso de concorrência para melhor uso de recursos computacionais,  obtenção de melhor desempenho, modularização do código. </p>
<p>Sistemas distribuídos levam a concorrência a um novo patamar de complexidade, fazendo uso de múltiplos processos, cada um com possivelmente múltiplos <em>threads</em>, ainda por cima, espalhados geograficamente. 
Contudo, ee em um sistema centralizado, uma variável global, um lock, ou outra primitiva de sincronização podem ser usadas na sincronização, em um sistema distribuído, primitivas simples como estas provavelmente não estarão disponíveis ou o sistema será muito restrito.</p>
<p>Um dos problemas enfrentados é o da exclusão mútua.</p>
<h3 id="exclusao-mutua_1">Exclusão Mútua</h3>
<p>Em um sistema distribuído, como controlar o acesso de múltiplos processos a um recurso compartilhado, garantindo que cada processo controla <strong>exclusivamente</strong> aquele recurso durante seu acesso?
Qualquer solução que se proponha a este problema problema de exclusão mútua, precisa ter as propriedades 1, 2 e 3, e, idealmente, também a 4, a seguir:</p>
<hr />
<h5 id="exclusao-mutua_2">Exclusão Mútua</h5>
<ol>
<li>exclusão mútua: somente um processo pode estar na <strong>região crítica</strong> em qualquer instante de tempo;</li>
<li>ausência de <em>deadlocks</em>: se processos estão tentando acessar o recurso, então <strong>algum processo deve conseguir acesso</strong> em algum instante, dado que nenhum processo fique na região crítica indefinidamente;</li>
<li>não inanição: todos os processos interessados consguem, em algum momento, acessar o recurso;</li>
<li>espera limitada: idealmente, o tempo de espera pelo recurso é limitado.</li>
</ol>
<hr />
<p>Há diversas soluções para exclusão mútua em sistemas distribuídos, em diversos cenários e com resultados mais ou menos eficientes. Três das mais simples e que ilustram o universo de soluções são as seguintes:</p>
<hr />
<h5 id="exclusao-mutua-solucoes">Exclusão Mútua - Soluções</h5>
<ul>
<li>Centralizado: Um processo acessa quando um coordenador diz que pode.</li>
<li>Anel: Um processo acessa quando estiver com o ``token'' de acesso.</li>
<li>Quorum: Um processo acessa quando houver acordo que é sua vez.</li>
</ul>
<hr />
<h4 id="centralizado">Centralizado</h4>
<p>Enquanto em um sistema centralizado há um sistema operacional que  provê abstrações simples para os processos a serem coordenados, em um sistema distribuído, não há esta entidade coordenadora.
Uma possível solução para o problem de exclusão mútua em um ambiente distribuído é justamente dar um passo para trás e introduzir um coordenador.</p>
<p>Nesta abordagem, o seguinte protocolo é implementado:</p>
<ul>
<li>Participante:</li>
<li>Envia requisição de acesso ao coordenador</li>
<li>Espera por resposta do coordenador</li>
<li>Acessa o recurso</li>
<li>Envia liberação do recurso para o coordenador</li>
<li>Coordenador</li>
<li>Inicializa recurso como livre</li>
<li>Ao receber requisição enfileira requisição</li>
<li>Ao receber liberação, marca recurso como livre</li>
<li>Sempre que recurso marcado como livre <strong>E</strong> fila não vazia: envie liberação para primeiro da fila e o remova da fila.</li>
</ul>
<hr />
<h5 id="centralizado_1">Centralizado</h5>
<p><img alt="Tanembaum 6.14" src="images/06-14.png" /></p>
<hr />
<p>Este algoritmo tem diversas características positivas:</p>
<hr />
<h5 id="pros">Prós</h5>
<ul>
<li>Justo: requests são processados em ordem (FCFS)</li>
<li>Não inanição</li>
<li>Espera limitada</li>
<li>Fácil de implementar, testar, entender</li>
</ul>
<hr />
<p>Contudo, tem também alguns aspectos negativos:</p>
<hr />
<h5 id="contras">Contras</h5>
<ul>
<li>Coordenador pode se tornar um gargalo;</li>
<li>Como lidar com falhas? Processos não sabem se recurso está bloqueado ou se usuário morreu e não devolveu a permissão;</li>
<li>Coordenador pode falhar e congelar o sistema.</li>
</ul>
<hr />
<p>Estes aspectos nos permitem mergulhar na área de tolerância a falhas, e o faremos, mas mais tarde. Por enquanto, consideraremos tolerância a falhas de forma superficial, após discutirmos outra abordagem abordagem.</p>
<h4 id="anel">Anel</h4>
<p>Nesta abordagem, os processos se organizam em um anel lógico, com um processo antes e outro depois. Um dos processos é iniciado com um <em>token</em>, que dá acesso ao recurso e o <em>token</em> é passado adiante no anel; sempre que estiver de posse do token, o processo pode acessar o recurso. Ou seja, todos os participantes executam o seguinte protocolo:</p>
<ul>
<li>Participante:</li>
<li>Ao receber o <em>token</em> de acesso, se quiser acessar o recurso, acessa.</li>
<li>Envia o <em>token</em> para o próximo nó do anel.</li>
</ul>
<hr />
<h5 id="anel_1">Anel</h5>
<p>![Anel](images/06-16.png}</p>
<hr />
<p>Como o algoritmo centralizado, o algoritmo do anel também em suas vantagens e desvantagens.</p>
<hr />
<h5 id="pros_1">Prós</h5>
<ul>
<li>Justo: Todos acessam</li>
<li>Não inanição</li>
<li>Espera limitada</li>
<li>Fácil de implementar, testar, entender</li>
</ul>
<hr />
<hr />
<h5 id="contras_1">Contras</h5>
<ul>
<li><em>Token</em> passado para quem não necessariamente quer acessar;</li>
<li>Tempo de espera linear no número de processos;</li>
<li>Como lidar com falhas?</li>
</ul>
<hr />
<h4 id="lidando-com-falhas-usando-timeouts">Lidando com falhas usando <em>timeouts</em></h4>
<p>Em ambos os algoritmos, centralizado e do anel, se um processo falhar, o algoritmo pode ficar "travado". Vejamos alguns casos específicos:</p>
<ul>
<li>No algoritmo centralizado, se o coordenador falha antes de liberar o acesso para algum processo, ele leva consigo a permissão.</li>
<li>Em ambos os algoritmos, se o processo acessando o recurso falha, a permissão é perdida e os demais processos sofrerão inanição.</li>
<li>No algoritmo do anel, se qualquer outro processo falha, o anel é interrompido o anel não conseguirá circular.</li>
</ul>
<p>Observe que nem falamos de falhas dos canais e já temos diversos cenários a serem resolvidos, para os quais se lhes pedir uma solução, tenho certeza absoluta de que me ofereção alguma baseada em <em>timeouts</em>. Por exemplo, se o processo não devolver a permissão de acesso antes de um <em>timeout</em>, então assuma que o mesmo está falho e gere nova permissão, a ser passada a outros requisitantes.</p>
<p>O problema desta e outras "soluções" baseadas em <em>timeouts" está no **assumir que o processo está falho*</em>, pois caso isso não seja verdade, teremos agora dois <em>tokens</em>  no sistema, podendo levar à violação da propriedade de exclusão mútua. Por mais que se ajuste o valor do temporizador, em um sistema distribuído assíncrono, o mesmo pode sempre estar errado. De fato, temos que</p>
<hr />
<h5 id="impossibilidade-de-deteccao-de-falhas">Impossibilidade de detecção de falhas</h5>
<p>Em um sistema distribuído assíncrono, é impossível distinguir um processo falho de um processo lento.</p>
<hr />
<p>Também mais tarde discutiremos as implicações desta impossibilidade. Por agora, pense apenas no seguinte: </p>
<hr />
<h5 id="pergunta">Pergunta:</h5>
<p>Qual deve ser um <em>timeout</em>  razoável para o meu sistema?</p>
<hr />
<p>A resposta depende de múltiplos fatores como:</p>
<hr />
<h5 id="resposta-mais-perguntas"><del>Resposta</del> Mais perguntas</h5>
<ul>
<li>Qual o custo <span><span class="MathJax_Preview">E</span><script type="math/tex">E</script></span> de esperar por mais tempo?</li>
<li>Qual o custo <span><span class="MathJax_Preview">C</span><script type="math/tex">C</script></span> de cometer um engano?</li>
<li>Qual a probabilidade <span><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span> de cometer um engano?</li>
<li><span><span class="MathJax_Preview">C * p &lt; E</span><script type="math/tex">C * p < E</script></span></li>
</ul>
<hr />
<p>Embora esta análise possa ser feita para estes algoritmos, a verdade é que são realmente limitados e outras abordagens seriam melhor destino dos seus esforços.</p>
<hr />
<blockquote>
<p>Se o mundo é probabilístico, porquê meus algoritmos devem ser determinísticos?"</p>
</blockquote>
<p>Werner Fogels, CTO da Amazon.</p>
<hr />
<p>Uma abordagem probabilística interessante é baseada em quóruns.</p>
<h4 id="quorum">Quórum</h4>
<p>De acordo com o <a href="https://dicionario.priberam.org/quorum">Dicionário Priberam da Língua Portuguesa, consultado em 17-04-2019</a>, "quórum" é o "Número de pessoas imprescindível para a realização de algo."
Aqui, este este algo será a liberação de acesso ao recurso almejado pelos processos no sistema distribuído.</p>
<p>Esta abordagem é semelhante em vários aspectos à centralizada. De fato, um dos papéis na abordagem é o de coordenador, que executa o mesmo protocolo que antes.</p>
<hr />
<h5 id="quorum-coordenador">Quorum - Coordenador</h5>
<ol>
<li>Inicializa recurso como livre</li>
<li>Ao receber requisição enfileira requisição</li>
<li>Ao receber liberação, marca recurso como livre</li>
<li>Sempre que recurso marcado como livre <strong>E</strong> fila não vazia: envie liberação para primeiro da fila e o remova da fila.</li>
</ol>
<hr />
<p>Entretanto, em vez de apenas um coordenador no sistema, temos <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span>, dos quais o participante precisa obter <span><span class="MathJax_Preview">m &gt; n/2</span><script type="math/tex">m > n/2</script></span> autorizações antes de acessar o recurso; <span><span class="MathJax_Preview">m</span><script type="math/tex">m</script></span> é o quórum do sistema.</p>
<hr />
<h5 id="quorum-quorum">Quorum - Quórum</h5>
<ul>
<li><span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> coordenadores.</li>
<li><span><span class="MathJax_Preview">m &gt; n/2</span><script type="math/tex">m > n/2</script></span> coordenadores</li>
</ul>
<hr />
<hr />
<h5 id="quorum-participante">Quorum - Participante</h5>
<ol>
<li>Envia requisição de acesso aos <span><span class="MathJax_Preview">n</span><script type="math/tex">n</script></span> coordenadores</li>
<li>Espera por resposta de <span><span class="MathJax_Preview">m</span><script type="math/tex">m</script></span> coordenadores</li>
<li>Acessa o recurso</li>
<li>Envia liberação do recurso para o coordenador</li>
</ol>
<hr />
<p>Além disso, para tornamos os problema mais interessante e demonstrar o potencial deste algoritmo, consideremos que as autorizações são armazenadas somente em memória, e que coordenadores, ao falhar e então resumir suas atividades, esqueçam-se  das autorizações já atribuídas.</p>
<hr />
<h5 id="falhas">Falhas</h5>
<p>Quando um coordenador falha, esquece que deu ok e reseta seu estado.</p>
<hr />
<p>Suponha o seguinte cenário:</p>
<hr />
<h5 id="quorum-exemplo">Quórum - Exemplo</h5>
<ul>
<li>Coordenadores = {<span><span class="MathJax_Preview">c_1,c_2,c_3,c_4,c_5,c_6,c_7</span><script type="math/tex">c_1,c_2,c_3,c_4,c_5,c_6,c_7</script></span>}</li>
<li><span><span class="MathJax_Preview">n = 7</span><script type="math/tex">n = 7</script></span></li>
<li><span><span class="MathJax_Preview">m = 4</span><script type="math/tex">m = 4</script></span></li>
<li>Participante <span><span class="MathJax_Preview">p_1</span><script type="math/tex">p_1</script></span> consegue autorização de {<span><span class="MathJax_Preview">c_1,c_2,c_3,c_4</span><script type="math/tex">c_1,c_2,c_3,c_4</script></span>} e entra na região crítica.</li>
<li>Coordenador <span><span class="MathJax_Preview">c_4</span><script type="math/tex">c_4</script></span> falha e se recupera</li>
<li>Participante <span><span class="MathJax_Preview">p_2</span><script type="math/tex">p_2</script></span> consegue autorização de {<span><span class="MathJax_Preview">c_4,c_5,c_6,c_7</span><script type="math/tex">c_4,c_5,c_6,c_7</script></span>} e entra na região crítica.</li>
<li><strong>Exclusão Mútua</strong> é violada.</li>
</ul>
<hr />
<p>Qual a probabilidade <span><span class="MathJax_Preview">P_v</span><script type="math/tex">P_v</script></span> desta violação ocorrer?</p>
<hr />
<h5 id="calculo-de-p_vp_v">Cálculo de <span><span class="MathJax_Preview">P_v</span><script type="math/tex">P_v</script></span></h5>
<ul>
<li>
<p>Seja <span><span class="MathJax_Preview">P</span><script type="math/tex">P</script></span> a probabilidade de um coordenador falhar e se recuperar em <span><span class="MathJax_Preview">\delta t</span><script type="math/tex">\delta t</script></span>, dentro de uma janela <span><span class="MathJax_Preview">T</span><script type="math/tex">T</script></span>.</p>
</li>
<li>
<p>Probabilidade de falha de exatamente 1 coordenador</p>
</li>
<li>
<p><span><span class="MathJax_Preview">P^1(1-P)^{n-1}</span><script type="math/tex">P^1(1-P)^{n-1}</script></span></p>
</li>
<li>
<p>Probabilidade de <span><span class="MathJax_Preview">k</span><script type="math/tex">k</script></span> coordenadores falharem?</p>
</li>
<li>
<p><span><span class="MathJax_Preview">P^k(1-P)^{n-k}</span><script type="math/tex">P^k(1-P)^{n-k}</script></span></p>
</li>
<li>
<p>Probabilidade de quaisquer <span><span class="MathJax_Preview">k</span><script type="math/tex">k</script></span> em <span><span class="MathJax_Preview">m</span><script type="math/tex">m</script></span> coordenadores falharem</p>
</li>
<li>
<p><span><span class="MathJax_Preview">\binom{m}{k} P^k(1-P)^{m-k}</span><script type="math/tex">\binom{m}{k} P^k(1-P)^{m-k}</script></span>       </p>
</li>
<li>
<p>Probabilidade de quaisquer <span><span class="MathJax_Preview">k</span><script type="math/tex">k</script></span> em <span><span class="MathJax_Preview">m</span><script type="math/tex">m</script></span> coordenadores falharem</p>
</li>
<li>
<p><span><span class="MathJax_Preview">\binom{m}{k} P^k(1-P)^{m-k}</span><script type="math/tex">\binom{m}{k} P^k(1-P)^{m-k}</script></span></p>
</li>
<li>
<p>Diferentes valores de <span><span class="MathJax_Preview">k</span><script type="math/tex">k</script></span> que são problemáticos?</p>
</li>
<li>TODO: desenho dos quóruns sobrepostos</li>
<li><span><span class="MathJax_Preview">\left| A \cup B\right| = \left| A \right| + \left|B\right| - \left| A \cap B \right| \Rightarrow n = m + m - k</span><script type="math/tex">\left| A \cup B\right| = \left| A \right| + \left|B\right| - \left| A \cap B \right| \Rightarrow n = m + m - k</script></span></li>
<li>
<p><span><span class="MathJax_Preview">\left| A \cap B \right| = \left| A \right| + \left|B\right| - \left| A \cup B\right| \Rightarrow k = m + m - n = 2m - n</span><script type="math/tex">\left| A \cap B \right| = \left| A \right| + \left|B\right| - \left| A \cup B\right| \Rightarrow k = m + m - n = 2m - n</script></span></p>
</li>
<li>
<p>Probabilidade de quaisquer <span><span class="MathJax_Preview">k</span><script type="math/tex">k</script></span> em <span><span class="MathJax_Preview">m</span><script type="math/tex">m</script></span> coordenadores falharem, para qualquer <span><span class="MathJax_Preview">k</span><script type="math/tex">k</script></span> que seja problemático</p>
</li>
<li><span><span class="MathJax_Preview">P_v = \sum_{2m-n}^n \binom{m}{k} P^k(1-P)^{m-k}</span><script type="math/tex">P_v = \sum_{2m-n}^n \binom{m}{k} P^k(1-P)^{m-k}</script></span></li>
</ul>
<hr />
<p>Para facilitar o entendimento desta grandeza, considere o exemplo:</p>
<hr />
<h5 id="exemplo">Exemplo</h5>
<ul>
<li><span><span class="MathJax_Preview">p=0.0001</span><script type="math/tex">p=0.0001</script></span> (1 minuto a cada 10 dias)</li>
<li><span><span class="MathJax_Preview">n = 32</span><script type="math/tex">n = 32</script></span></li>
<li><span><span class="MathJax_Preview">m = 0.75n</span><script type="math/tex">m = 0.75n</script></span></li>
<li><span><span class="MathJax_Preview">P_v &lt; 10^{-40}</span><script type="math/tex">P_v < 10^{-40}</script></span> (<a href="https://cosmosmagazine.com/mathematics/the-big-baffling-number-at-the-heart-of-a-cosmic-coincidence">Curiosidade sobre <span><span class="MathJax_Preview">10^40</span><script type="math/tex">10^40</script></span></a>)</li>
</ul>
<hr />
<p>A probabilidade de violação da exclusão mútua, neste caso, é muito pequena, a despeito de suportar falhas dos coordenadores. </p>
<hr />
<h5 id="pros_2">Prós</h5>
<ul>
<li>Tolera falhas de coordenadores, com probabilidade controlada de violação de exclusão mútua</li>
</ul>
<hr />
<p>Mas e as outras propriedades desejáveis do algoritmo de exclusão mútua, são alcançadas? Relembrando:</p>
<hr />
<h5 id="exclusao-mutua_3">Exclusão Mútua</h5>
<ol>
<li>exclusão mútua: somente um processo pode estar na <strong>região crítica</strong> em qualquer instante de tempo;</li>
<li>ausência de <em>deadlocks</em>: se processos estão tentando acessar o recurso, então <strong>algum processo deve conseguir acesso</strong> em algum instante, dado que nenhum processo fique na região crítica indefinidamente;</li>
<li>não inanição: todos os processos interessados consguem, em algum momento, acessar o recurso;</li>
<li>espera limitada: idealmente, o tempo de espera pelo recurso é limitado.</li>
</ol>
<hr />
<hr />
<h5 id="contras_2">Contras</h5>
<ul>
<li>Exclusão Mútua: <span><span class="MathJax_Preview">1 - P_v</span><script type="math/tex">1 - P_v</script></span></li>
<li>Não-inanição</li>
<li>E se cada participante obter o ok de um coordenador?</li>
<li>Temporizador para quebrar o <em>deadlock</em>?</li>
<li>Espera limitada</li>
<li>Aborts podem levar a espera infinita.</li>
</ul>
<hr />
<p>Assim, este agoritmo também pode não ser adequado para certas situações. Vamos tentar reacessar os problemas da primeira abordagem.
Por um lado, o uso de um líder para coordenar ações em um SD simplifica o projeto, mas, por outro, o coordenador pode se tornar um ponto único de falha, como no algoritmo de exclusão mútua centralizado.
Mas e se substituíssemos o coordenador no caso de falhas? Este é o problema conhecido como eleição de líderes.</p>
<hr />
<p>layout: default
title: Eleição de Líderes
parent: Coordenação
nav_order: 2</p>
<hr />
<p>Assim, este agoritmo também pode não ser adequado para certas situações. Vamos tentar reacessar os problemas da primeira abordagem.
Por um lado, o uso de um líder para coordenar ações em um SD simplifica o projeto, mas, por outro, o coordenador pode se tornar um ponto único de falha, como no algoritmo de exclusão mútua centralizado.
Mas e se substituíssemos o coordenador no caso de falhas? Este é o problema conhecido como eleição de líderes.</p>
<h2 id="eleicao-de-lideres">Eleição de Líderes</h2>
<p>O problema da escolha de um processo centralizador pode ser posto informamente como:</p>
<hr />
<h5 id="eleicao-de-lideres_1">Eleição de Líderes</h5>
<ul>
<li>Procedimento pelo qual um processo é escolhido dentre os demais processos.</li>
<li>Todos os processos identificam o mesmo processo como eleito.</li>
<li>Uma nova eleição deve acontecer sempre que o líder corrente se tornar indisponível.</li>
</ul>
<hr />
<p>Experimentemos com protocolos triviais. Vamos eleger um líder na sala. Do que precisamos?</p>
<hr />
<h5 id="eleicao-de-representate-de-sala">Eleição de representate de sala</h5>
<ul>
<li>Votação?</li>
<li>Identidade</li>
<li>Teste de força?</li>
<li>Estabilidade?</li>
</ul>
<hr />
<h1 id="para-ser-terminado">PARA SER TERMINADO</h1>
<p>\begin{frame}{Identidade}
Antes de qualquer coisa, é preciso ser possível identificar um processo.</p>
<p>Como isso pode ser feito, na prática?</p>
<p>\pause</p>
<p>
<script type="math/tex; mode=display">\begin{itemize}
    \item PID -- Process Identier
    \item IP -- Internet Protocol Address
    \item Socket -- IP + Port
\end{itemize}</script>
\end{frame}</p>
<p>\begin{frame}{Algoritmo do Brigão/Bully}
<script type="math/tex; mode=display">\begin{itemize}
    \item Selecione o processo <code>vivo'' com o maior identificador!
    \item Quando $p$ acha que o líder está morto:
    \begin{itemize}
        \item Envia mensagem</code>eleição,<span><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span>'' para todos os processo com identificador maior
        \item Se ninguém responde, <span><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span> assume como líder
        \item Se algum responde, aguarda notificação.
    \end{itemize}</script>
    \item Quando <span><span class="MathJax_Preview">q</span><script type="math/tex">q</script></span> recebe <code>eleição,$p$''
    \begin{itemize}
        \item Envia</code>ok'' para <span><span class="MathJax_Preview">p</span><script type="math/tex">p</script></span>
        \item Fica ciente de que o coordenador atual está morto
    \end{itemize}
\pause
    \item Ao assumir como líder, o processo notifica a todos os outros
    \item Se um processo falho se recupera, inicia uma eleição.</p>
<p>\end{itemize}
\end{frame}</p>
<p>\begin{frame}{Algoritmo do Brigão/Bully}
    \includegraphics[width=.75\textwidth]{images/bully}</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>\href{https://my.oschina.net/juliashine/blog/88173}{Fonte}
</code></pre></div>
</td></tr></table>

<p>\end{frame}</p>
<div>
<div class="MathJax_Preview">\begin{frame}{Algoritmo do Anel}
\begin{itemize}
    \item Organize os nós em um anel lógico
    \item Quando $p$ acha que o líder está morto:
    \begin{itemize}
        \item Envia mensagem \{$p$\} para ``a direita'' no anel.
        \item Se processo à direita está falho, salte-o, e assim por diante.
    \end{itemize}
    \pause
    \item Quando $q$ recebe \{$p$\}
    \begin{itemize}
        \item Envia  \{$p,q$\} para a direita.
    \end{itemize}
    \pause
    \item Quando $p$ recebe $S$ tal que $q \in S$
    \begin{itemize}
        \item Escolhe menor id em $S$, por exemplo, e anuncia como líder.
    \end{itemize}
\end{itemize}
\end{frame}</div>
<script type="math/tex; mode=display">\begin{frame}{Algoritmo do Anel}
\begin{itemize}
    \item Organize os nós em um anel lógico
    \item Quando $p$ acha que o líder está morto:
    \begin{itemize}
        \item Envia mensagem \{$p$\} para ``a direita'' no anel.
        \item Se processo à direita está falho, salte-o, e assim por diante.
    \end{itemize}
    \pause
    \item Quando $q$ recebe \{$p$\}
    \begin{itemize}
        \item Envia  \{$p,q$\} para a direita.
    \end{itemize}
    \pause
    \item Quando $p$ recebe $S$ tal que $q \in S$
    \begin{itemize}
        \item Escolhe menor id em $S$, por exemplo, e anuncia como líder.
    \end{itemize}
\end{itemize}
\end{frame}</script>
</div>
<div>
<div class="MathJax_Preview">\begin{frame}{Chang \&amp; Robert's}
\begin{itemize}
    \item Organize os nós em um anel lógico
    \item Quando $p$ acha que o líder está morto:
    \begin{itemize}
        \item Envia mensagem $p$ para ``a direita'' no anel, saltando falhos.
        \item Liga flag ``participante''
    \end{itemize}
    \pause
    \item Quando $q$ recebe $p$
    \begin{itemize}
        \item Se $p &gt; q$, repassa $p$ para a direita.
        \item Senão, envia  $q$ para a direita.
        \item Liga flag ``participante''        
    \end{itemize}
    \pause
    \item Quando $p$ recebe $q$ da esquerda 
    \begin{itemize}
        \item Se ``participante'' está ligado, identifica $q$ como líder.
        \item Desliga ``participante''
        \item Se $p \neq q$, repassa $q$ à direita
    \end{itemize}
\end{itemize}
\end{frame}</div>
<script type="math/tex; mode=display">\begin{frame}{Chang \& Robert's}
\begin{itemize}
    \item Organize os nós em um anel lógico
    \item Quando $p$ acha que o líder está morto:
    \begin{itemize}
        \item Envia mensagem $p$ para ``a direita'' no anel, saltando falhos.
        \item Liga flag ``participante''
    \end{itemize}
    \pause
    \item Quando $q$ recebe $p$
    \begin{itemize}
        \item Se $p > q$, repassa $p$ para a direita.
        \item Senão, envia  $q$ para a direita.
        \item Liga flag ``participante''        
    \end{itemize}
    \pause
    \item Quando $p$ recebe $q$ da esquerda 
    \begin{itemize}
        \item Se ``participante'' está ligado, identifica $q$ como líder.
        \item Desliga ``participante''
        \item Se $p \neq q$, repassa $q$ à direita
    \end{itemize}
\end{itemize}
\end{frame}</script>
</div>
<p>\begin{frame}[allowframebreaks]{Yo-Yo}
<script type="math/tex; mode=display">\begin{itemize}
    \item Grafos incompletos
    \item Duas fases
\end{itemize}</script>
</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>\framebreak

\begin{block}{Fase 1}
\begin{itemize}
    \item $p$ envia seu identificador para seus vizinhos.
    \item Quando $q$ recebe $p$
    \begin{itemize}
        \item Se $p&gt;q$, adiciona aresta $q\rightarrow p$
        \item Senão, adiciona aresta $q\leftarrow p$
        \item Fonte (source)
        \item Vertedouro (sink)
        \item Interno
    \end{itemize}
\end{itemize}
\end{block}
</code></pre></div>
</td></tr></table>

<p>\framebreak</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>\begin{block}{Fase 2: Yo-\alert{Yo}}
\begin{itemize}
\item Fontes enviam seus identificadores para seus vizinhos.
\item Interno espera msg de todas as arestas de entrada, escolhe o menor id, e repassa para arestas de saída.
\item Vertedouro espera msg de todas as arestas de entrada e escolhe o menor id.
\end{itemize}
\end{block}
</code></pre></div>
</td></tr></table>

<p>\framebreak</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>\begin{block}{Fase 2: \alert{Yo}-Yo}
\begin{itemize}
\item Vertedouro envia S para vizinhos de onde viu menor valor e N para os demais.
\item Interno repassa S para o vizinho correspondente ao menor id e N para os demais.
\item Fonte espera por todos os votos. Se todos são S, continua; caso contrário, desiste.
\item N inverte a direção das arestas em que trafega.
\item Possível otimizar para eliminar nós e arestas irrelevantes.
\end{itemize}
\end{block}
</code></pre></div>
</td></tr></table>

<p>\framebreak</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>\includegraphics[width=.8\textwidth]{images/yoyo}*
</code></pre></div>
</td></tr></table>

<p>\begin{small}
a) The network, b) Oriented network after setup phase, c) YO- phase in which source values are passed, d)-YO phase sending responses from sinks, e) updated structure after -YO phase. **</p>
<p>*\href{<a href="https://commons.wikimedia.org/w/index.php?curid=36757409}{Fonte">https://commons.wikimedia.org/w/index.php?curid=36757409}{Fonte</a>: Hemis62 - Own work, CC BY-SA 4.0, }</p>
<p>**\href{<a href="https://en.wikipedia.org/wiki/Leader_election}{Fonte">https://en.wikipedia.org/wiki/Leader_election}{Fonte</a>}
\end{small}
\end{frame}</p>
<div>
<div class="MathJax_Preview">\begin{frame}{Problemas?}
O que acontece se a rede é particionada?
\end{frame}</div>
<script type="math/tex; mode=display">\begin{frame}{Problemas?}
O que acontece se a rede é particionada?
\end{frame}</script>
</div>
<div>
<div class="MathJax_Preview">\begin{frame}{Split Brain}
\begin{itemize}
    \item Network Partitioning: rede dividida em duas partes incomunicáveis.
    \item Múltiplas eleições podem acontecer em paralelo.
    \item Múltiplos líderes em paralelo.
    \item Como lidar com este problema? 
    \pause
    \begin{itemize}
        \item Use primeiro algoritmo e só eleja líder após maioria de votos.
        \item Rede redundante, disco compartilhado \pause ,... centralização...\pause volta ao primeiro caso.
    \end{itemize}
\end{itemize}
\end{frame}</div>
<script type="math/tex; mode=display">\begin{frame}{Split Brain}
\begin{itemize}
    \item Network Partitioning: rede dividida em duas partes incomunicáveis.
    \item Múltiplas eleições podem acontecer em paralelo.
    \item Múltiplos líderes em paralelo.
    \item Como lidar com este problema? 
    \pause
    \begin{itemize}
        \item Use primeiro algoritmo e só eleja líder após maioria de votos.
        \item Rede redundante, disco compartilhado \pause ,... centralização...\pause volta ao primeiro caso.
    \end{itemize}
\end{itemize}
\end{frame}</script>
</div>
<div>
<div class="MathJax_Preview">\begin{frame}{Detecção de Falhas}
Eleição de líderes perfeita é impossível em cenários realísticos.
\begin{itemize}
    \item Detecção de falhas perfeita é impossível...
    \item em sistemas distribuídos assíncronos (Internet)
    \item sujeitos à partições (Internet)
    \item com requisitos de disponibilidade total.
    \pause
    \item Falemos mais sobre este problema depois.
\end{itemize}
\end{frame}</div>
<script type="math/tex; mode=display">\begin{frame}{Detecção de Falhas}
Eleição de líderes perfeita é impossível em cenários realísticos.
\begin{itemize}
    \item Detecção de falhas perfeita é impossível...
    \item em sistemas distribuídos assíncronos (Internet)
    \item sujeitos à partições (Internet)
    \item com requisitos de disponibilidade total.
    \pause
    \item Falemos mais sobre este problema depois.
\end{itemize}
\end{frame}</script>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../arch/" title="Arquiteturas" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Arquiteturas
              </div>
            </div>
          </a>
        
        
          <a href="../time/" title="Tempo" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Tempo
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://unpkg.com/mermaid@8.5.1/dist/mermaid.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>